<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:bop2="http://www.fanuc.co.jp/develop/mmc/bop2">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>cnc_regtool_f2</title>
   </head>
   <body bgcolor="#FFFFFF"><FONT face="Verdana,Arial,Helvetica,sans-serif"><a name="Function Name"></a><p class="ftitle">cnc_regtool_f2</p>
         <div class="text"><a name="Declaration"></a><p class="label">Declaration</p>
            <div class="mth">#include "fwlib32.h" or "fwlib64.h"
               <p></p>
               <prottype>FWLIBAPI short WINAPI cnc_regtool_f2(unsigned short FlibHndl,
                  short s_number, short *data_num, IODBTLMNG_F2 *tool); </prottype>
            </div><a name="Description"></a><p class="label">Description</p>
            <cmn>
               
               <p>
                  Registers the Tool management data which is specified by the start data number 
                  and the number of the data to the Tool management data table. 
                  </p>
               
               <p>
                  Registration by this function is done sequentially one by one. 
                  Once the error occurs, succeeding registration is aborted. 
                  </p>
               </cmn><a name="Arguments"></a><p class="label">Arguments</p>
            <div class="dtarg">
               <name>FlibHndl</name>
               &nbsp;&nbsp;[&nbsp;
               <type>in</type>&nbsp;]
               </div>
            <div class="ddarg">
               <content>
                  
                  <p>
                     Specify the library handle. See "<a href="handle.htm" target="_parent">Library handle</a>" for details.
                     </p>
                  </content>
            </div>
            <div class="dtarg">
               <name>s_number</name>
               &nbsp;&nbsp;[&nbsp;
               <type>in</type>&nbsp;]
               </div>
            <div class="ddarg">
               <content>
                  
                  <p>
                     Specify the start data number for the registration to the Tool management data table.
                     
                     </p>
                  </content>
            </div>
            <div class="dtarg">
               <name>data_num</name>
               &nbsp;&nbsp;[&nbsp;
               <type>in/out</type>&nbsp;]
               </div>
            <div class="ddarg">
               <content>
                  
                  <p>
                     Specify the pointer to the number of the registration data for the registration to
                     the Tool management data table. 
                     Set the number of the registration data(1...) to the pointed data before calling this
                     function. 
                     </p>
                  
                  <p>
                     This function registers the number of Tool management data specified by "*data_num",
                     
                     from the index specified by "s_number". 
                     After the execution of this function, *data_num holds the real registered number of
                     data. 
                     </p>
                  </content>
            </div>
            <div class="dtarg">
               <name>tool</name>
               &nbsp;&nbsp;[&nbsp;
               <type>in</type>&nbsp;]
               </div>
            <div class="ddarg">
               <content>
                  
                  <p>
                     Specify the pointer to IODBTLMNG_F2 structure including the Tool management data to
                     be registered. 
                     The IODBTLMNG_F2 structure is as follows. 
                     
                     <pre>
typedef struct  iodbtlmng_f2 {
    long T_code;                /* tool number(T) */
    long life_count;            /* tool life counter */
    long max_life;              /* maximum of tool life */
    long rest_life;             /* rest of tool life */
    unsigned char  life_stat;   /* state of tool life */
    unsigned char  cust_bits;   /* customizing bit */
    unsigned short tool_info;   /* tool info. */
    short H_code;               /* tool length compensation number (H) */
    short D_code;               /* cutter compensation number (D) */
    long spindle_speed;         /* spindle speed(S) */
    long feedrate;              /* feed rate(F) */
    short magazine;             /* magazine number(read only) */
    short pot;                  /* pot number(read only) */
    short G_code;               /* tool geometric compensation number(G) */
    short W_code;               /* tool wear compensation number(W) */
    short gno;                  /* tool geometric number */
    short grp;                  /* edge group number(only 0i-F, 30i/31i/32i) */
    short edge;                 /* edge number(only 0i-F, 30i/31i/32i) */
    short org_magazine;         /* origin magazine number(only 0i-F, 30i/31i/32i) */
    short org_pot;              /* origin pot number(only 0i-F, 30i/31i/32i) */
    short reserve_s;            /* reserved */
    long reserved[2];           /* reserved */
    long custom1;               /* customizing data 1  */
    long custom2;               /* customizing data 2  */
    long custom3;               /* customizing data 3  */
    long custom4;               /* customizing data 4  */
    long custom5;               /* customizing data 5  */
    long custom6;               /* customizing data 6  */
    long custom7;               /* customizing data 7  */
    long custom8;               /* customizing data 8  */
    long custom9;               /* customizing data 9  */
    long custom10;              /* customizing data 10 */
    long custom11;              /* customizing data 11 */
    long custom12;              /* customizing data 12 */
    long custom13;              /* customizing data 13 */
    long custom14;              /* customizing data 14 */
    long custom15;              /* customizing data 15 */
    long custom16;              /* customizing data 16 */
    long custom17;              /* customizing data 17 */
    long custom18;              /* customizing data 18 */
    long custom19;              /* customizing data 19 */
    long custom20;              /* customizing data 20 */
    long custom21;              /* customizing data 21 */
    long custom22;              /* customizing data 22 */
    long custom23;              /* customizing data 23 */
    long custom24;              /* customizing data 24 */
    long custom25;              /* customizing data 25 */
    long custom26;              /* customizing data 26 */
    long custom27;              /* customizing data 27 */
    long custom28;              /* customizing data 28 */
    long custom29;              /* customizing data 29 */
    long custom30;              /* customizing data 30 */
    long custom31;              /* customizing data 31 */
    long custom32;              /* customizing data 32 */
    long custom33;              /* customizing data 33 */
    long custom34;              /* customizing data 34 */
    long custom35;              /* customizing data 35 */
    long custom36;              /* customizing data 36 */
    long custom37;              /* customizing data 37 */
    long custom38;              /* customizing data 38 */
    long custom39;              /* customizing data 39 */
    long custom40;              /* customizing data 40 */
} IODBTLMNG_F2;
</pre>
                     
                     <table border="0">
                        
                        <tr>
                           <td valign="top">(Note)</td>
                           
                           <td>
                              Magazine number and pot number are read only data, so it is impossible to write data
                              in these. 
                              </td>
                           </tr>
                        
                        <tr>
                           <td valign="top">(Note)</td>
                           
                           <td>
                              Above customizing data(5-20) are available at only "the additional customized data
                              on tool management function option(5-20)".
                              </td>
                           </tr>
                        
                        <tr>
                           <td valign="top">(Note)</td>
                           
                           <td>
                              Above customizing data(5-40) are available at only "the additional customized data
                              on tool management function option(5-40)".
                              </td>
                           </tr>
                        </table>
                     </p>
                  </content>
            </div><a name="Return"></a><p class="label">Return</p>
            <p>EW_OK is returned on successful completion, otherwise any value except EW_OK is returned.</p>
            <p>The major error codes are as follows.</p>
            <table border="1">
               <colgroup align="center" valign="top"></colgroup>
               <colgroup align="left" valign="top"></colgroup>
               <colgroup align="left" valign="top"></colgroup>
               <tr>
                  <th>Return code</th>
                  <th>Meaning/Error handling</th>
               </tr>
               <tr>
                  <td>
                     <name>EW_BUSY</name><br>(-1)</td>
                  <td>
                     <content>
                        Other users(such as PMC) have accessed the same data window.
                        Try this function again.
                        </content>
                  </td>
               </tr>
               <tr>
                  <td>
                     <name>EW_NUMBER</name><br>(3)</td>
                  <td>
                     <content>
                        The start data number for the Tool management data table(s_number) is invalid.
                        Or, valid number of the data on the Tool management data table exceeds.
                        </content>
                  </td>
               </tr>
               <tr>
                  <td>
                     <name>EW_DATA</name><br>(5)</td>
                  <td>
                     <content>
                        The member in the IODBTLMNG_F2 structure is invalid.<br>
                        In order to get more information for this err_no return value, execute 
                        <a href="../misc/cnc_getdtailerr.xml" target="_parent">cnc_getdtailerr</a> function.
                        The following detail status will be set onto the member, err_no of OBDERR structure.
                        
                        <table border="0">
                           
                           <tr>
                              <td>0</td>
                              <td>:</td>
                              <td>error except EW_DATA</td>
                           </tr>
                           
                           <tr>
                              <td>1</td>
                              <td>:</td>
                              <td>error of tool number</td>
                           </tr>
                           
                           <tr>
                              <td>2</td>
                              <td>:</td>
                              <td>error of tool life counter</td>
                           </tr>
                           
                           <tr>
                              <td>3</td>
                              <td>:</td>
                              <td>error of maximum of tool life</td>
                           </tr>
                           
                           <tr>
                              <td>4</td>
                              <td>:</td>
                              <td>error of rest of tool life</td>
                           </tr>
                           
                           <tr>
                              <td>5</td>
                              <td>:</td>
                              <td>error of state of tool life</td>
                           </tr>
                           
                           <tr>
                              <td>7</td>
                              <td>:</td>
                              <td>error of tool information</td>
                           </tr>
                           
                           <tr>
                              <td>8</td>
                              <td>:</td>
                              <td>error of tool length compensation number</td>
                           </tr>
                           
                           <tr>
                              <td>9</td>
                              <td>:</td>
                              <td>error of cutter compensation number</td>
                           </tr>
                           
                           <tr>
                              <td>10</td>
                              <td>:</td>
                              <td>error of spindle speed</td>
                           </tr>
                           
                           <tr>
                              <td>11</td>
                              <td>:</td>
                              <td>error of feed rate</td>
                           </tr>
                           
                           <tr>
                              <td>12</td>
                              <td>:</td>
                              <td>error of tool geometric compensation number</td>
                           </tr>
                           
                           <tr>
                              <td>13</td>
                              <td>:</td>
                              <td>error of tool wear compensation number</td>
                           </tr>
                           
                           <tr>
                              <td>14</td>
                              <td>:</td>
                              <td>error of tool geometric number</td>
                           </tr>
                           
                           <tr>
                              <td>15</td>
                              <td>:</td>
                              <td>error of edge group number(only 0i-F, 30i/31i/32i)</td>
                           </tr>
                           
                           <tr>
                              <td>16</td>
                              <td>:</td>
                              <td>error of edge number(only 0i-F, 30i/31i/32i)</td>
                           </tr>
                           
                           <tr>
                              <td>17</td>
                              <td>:</td>
                              <td>error of origin magazine number(only 0i-F, 30i/31i/32i)</td>
                           </tr>
                           
                           <tr>
                              <td>18</td>
                              <td>:</td>
                              <td>error of origin pot number(only 0i-F, 30i/31i/32i)</td>
                           </tr>
                           
                           <tr>
                              <td>27</td>
                              <td>:</td>
                              <td>Registered magazine and pot number were specified.(only 0i-F, 30i/31i/32i)</td>
                           </tr>
                           
                           <tr>
                              <td>29</td>
                              <td>:</td>
                              <td>Multi edge data is illegal.(Data of multi edge tool has a part of inconsistency on
                                 tool management funcion.)(only 0i-F, 30i/31i/32i)</td>
                           </tr>
                           
                           <tr>
                              <td>31,..,70</td>
                              <td>:</td>
                              <td>error of customizing data</td>
                           </tr>
                           </table>
                        </content>
                  </td>
               </tr>
               <tr>
                  <td>
                     <name>EW_NOOPT</name><br>(6)</td>
                  <td>
                     <content>
                        No option<br>
                        The Tool management function 64 pairs, or the Tool management function 240 pairs,
                        or the Tool management function 1000 pairs.
                        </content>
                  </td>
               </tr>
               <tr>
                  <td>
                     <name>EW_PROT</name><br>(7)</td>
                  <td>
                     <content>
                        Write protection<br>
                        The Tool management data table is write protected.
                        </content>
                  </td>
               </tr>
               <tr>
                  <td>
                     <name>EW_REJECT</name><br>(13)</td>
                  <td>
                     <content>
                        CNC execution rejected<br>
                        This function tries to register the data against the Tool management data table entry
                        which has already existed or interfere with other tool.
                        </content>
                  </td>
               </tr>
            </table>
            <p></p>
            <p>
               As for the other return codes or the details, see 
               
               "<a href="errcode.htm" target="_parent">Return status of Data window function</a>"
               </p><a name="CNC option"></a><p class="label">CNC option</p>
            <p></p>
            <p>This function need the following CNC option.</p>
            <ul>
               <p>
                  <need>
                     The Tool management function 64 pairs, or the Tool management function 240 pairs,
                     or the Tool management function 1000 pairs.
                     </need>
               </p>
            </ul>
            <p>And this function is related to the following CNC option.</p>
            <ul>
               <p>
                  <type>
                     
                     <p>
                        This function is influenced by the additional customized data on tool management function
                        option(5-20),(5-40).<br>
                        </p>
                     </type>
               </p>
            </ul>
            <p>For HSSB connection,</p>
            <ul>
               <p>
                  <hssb>
                     
                     <p>The extended driver/library function are necessary.</p>
                     </hssb>
               </p>
            </ul>
            <p>For Ethernet connection,</p>
            <ul>
               <p>
                  <ethr>
                     
                     <p>The Ethernet function and the extended driver/library function are necessary.</p>
                     
                     <p>However, in case of Series 16i/18i/21i-B, 0i-F and 30i, the required CNC option is
                        as follows.</p>
                     
                     <p>When Embedded Ethernet is used,</p>
                     
                     <p>
                        <ul>above two optional functions are not required.</ul>
                     </p>
                     
                     <p>When Ethernet board is used,</p>
                     
                     <p>
                        <ul>only Ethernet function is required.</ul>
                     </p>
                     </ethr>
               </p>
            </ul>
            <p></p><a name="CNC parameter"></a><p class="label">CNC parameter</p>
            <p>This function is related to the following CNC parameter.<br>
               See the manual of CNC parameter for details.</p>
            <p>
               <type>
                  
                  <ul type="disc">
                     
                     <li>Series 16i/18i/21i</li>
                     13220 (valid number of Tool management data)<br>
                     
                     <li>Series 0i-F, 30i/31i/32i</li>
                     13220 (valid number of Tool management data)<br>
                     13201#3 (It is necessary to use multi edge tool on tool management function.)
                     </ul>
                  </type>
            </p>
            <p></p><a name="CNC mode"></a><p class="label">CNC mode</p>
            <p>This function can be used in any CNC mode.</p><a name="Available CNC"></a><p class="label">Available CNC</p>
            <table border="1">
               <colgroup width="100em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <tr>
                  <th></th>
                  <th>0i-A</th>
                  <th>0i-B/C(Note)</th>
                  <th>0i-D</th>
                  <th>0i-F</th>
                  <th>15</th>
                  <th>15i</th>
                  <th>16</th>
                  <th>18</th>
                  <th>21</th>
                  <th>16i-A</th>
                  <th>18i-A</th>
                  <th>21i-A</th>
                  <th>16i-B</th>
                  <th>18i-B</th>
                  <th>21i-B</th>
                  <th>30i-A</th>
                  <th>30i-B</th>
               </tr>
               <tr>
                  <td>M (Machining)</td>
                  <td class="">
                     <fs0ia>X</fs0ia>
                  </td>
                  <td class="">
                     <fs0ib>X</fs0ib>
                  </td>
                  <td class="">
                     <fs0id>X</fs0id>
                  </td>
                  <td class="support">
                     <fs0if>O</fs0if>
                  </td>
                  <td class="">
                     <fs15>X</fs15>
                  </td>
                  <td class="">
                     <fs15i>X</fs15i>
                  </td>
                  <td class="">
                     <fs16>X</fs16>
                  </td>
                  <td class="">
                     <fs18>X</fs18>
                  </td>
                  <td class="">
                     <fs21>X</fs21>
                  </td>
                  <td class="">
                     <fs16ia>X</fs16ia>
                  </td>
                  <td class="">
                     <fs18ia>X</fs18ia>
                  </td>
                  <td class="">
                     <fs21ia>X</fs21ia>
                  </td>
                  <td class="support">
                     <fs16ib>O</fs16ib>
                  </td>
                  <td class="support">
                     <fs18ib>O</fs18ib>
                  </td>
                  <td class="support">
                     <fs21ib>O</fs21ib>
                  </td>
                  <td class="support">
                     <fs30ia>O</fs30ia>
                  </td>
                  <td class="support">
                     <fs30ib>O</fs30ib>
                  </td>
               </tr>
               <tr>
                  <td>T (Turning)  </td>
                  <td class="">
                     <fs0ia>X</fs0ia>
                  </td>
                  <td class="">
                     <fs0ib>X</fs0ib>
                  </td>
                  <td class="">
                     <fs0id>X</fs0id>
                  </td>
                  <td class="support">
                     <fs0if>O</fs0if>
                  </td>
                  <td class="">
                     <fs15>X</fs15>
                  </td>
                  <td>
                     -
                     </td>
                  <td class="">
                     <fs16>X</fs16>
                  </td>
                  <td class="">
                     <fs18>X</fs18>
                  </td>
                  <td class="">
                     <fs21>X</fs21>
                  </td>
                  <td class="">
                     <fs16ia>X</fs16ia>
                  </td>
                  <td class="">
                     <fs18ia>X</fs18ia>
                  </td>
                  <td class="">
                     <fs21ia>X</fs21ia>
                  </td>
                  <td class="support">
                     <fs16ib>O</fs16ib>
                  </td>
                  <td class="support">
                     <fs18ib>O</fs18ib>
                  </td>
                  <td class="support">
                     <fs21ib>O</fs21ib>
                  </td>
                  <td class="support">
                     <fs30ia>O</fs30ia>
                  </td>
                  <td class="support">
                     <fs30ib>O</fs30ib>
                  </td>
               </tr>
               <tr>
                  <td>LC (Loader)  </td>
                  <td>
                     -
                     </td>
                  <td>
                     -
                     </td>
                  <td>
                     -
                     </td>
                  <td>
                     -
                     </td>
                  <td>
                     -
                     </td>
                  <td>
                     -
                     </td>
                  <td class="">
                     <fs16>X</fs16>
                  </td>
                  <td class="">
                     <fs18>X</fs18>
                  </td>
                  <td class="">
                     <fs21>X</fs21>
                  </td>
                  <td class="">
                     <fs16ia>X</fs16ia>
                  </td>
                  <td class="">
                     <fs18ia>X</fs18ia>
                  </td>
                  <td class="">
                     <fs21ia>X</fs21ia>
                  </td>
                  <td class="">
                     <fs16ib>X</fs16ib>
                  </td>
                  <td class="">
                     <fs18ib>X</fs18ib>
                  </td>
                  <td class="">
                     <fs21ib>X</fs21ib>
                  </td>
                  <td>
                     -
                     </td>
                  <td>
                     -
                     </td>
               </tr>
            </table>
            <p></p>
            <table border="1">
               <colgroup width="100em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <colgroup align="center" width="40em"></colgroup>
               <tr>
                  <th></th>
                  <th>0i-D</th>
                  <th>0i-F</th>
                  <th>16i</th>
                  <th>18i</th>
                  <th>30i-A</th>
                  <th>30i-B</th>
               </tr>
               <tr>
                  <td>P (Punch press)</td>
                  <td class="">
                     <fs0id>X</fs0id>
                  </td>
                  <td class="">
                     <fs0if>X</fs0if>
                  </td>
                  <td class="">
                     <fs16i>X</fs16i>
                  </td>
                  <td class="">
                     <fs18i>X</fs18i>
                  </td>
                  <td>
                     -
                     </td>
                  <td class="">
                     <fs30ib>X</fs30ib>
                  </td>
               </tr>
               <tr>
                  <td>L (Laser)      </td>
                  <td>
                     -
                     </td>
                  <td>
                     -
                     </td>
                  <td class="">
                     <fs16i>X</fs16i>
                  </td>
                  <td>
                     -
                     </td>
                  <td>
                     -
                     </td>
                  <td class="">
                     <fs30ib>X</fs30ib>
                  </td>
               </tr>
               <tr>
                  <td>W (Wire)       </td>
                  <td>
                     -
                     </td>
                  <td>
                     -
                     </td>
                  <td class="">
                     <fs16i>X</fs16i>
                  </td>
                  <td class="">
                     <fs18i>X</fs18i>
                  </td>
                  <td class="">
                     <fs30ia>X</fs30ia>
                  </td>
                  <td class="">
                     <fs30ib>X</fs30ib>
                  </td>
               </tr>
            </table>
            <p></p><br><table border="1">
               <colgroup width="100em"></colgroup>
               <colgroup align="center" width="86em"></colgroup>
               <colgroup align="center" width="86em"></colgroup>
               <tr>
                  <td>Power Mate i-D</td>
                  <td class="">
                     <d>X</d>
                  </td>
               </tr>
               <tr>
                  <td>Power Mate i-H</td>
                  <td class="">
                     <h>X</h>
                  </td>
               </tr>
               <tr>
                  <td>Power Motion i-A</td>
                  <td class=""><a>X</a></td>
               </tr>
            </table>
            <p></p>
            <table class="dd">
               <tr>
                  <td></td>
                  <td>"O"</td>
                  <td>:</td>
                  <td>Both Ethernet and HSSB</td>
               </tr>
               <tr>
                  <td></td>
                  <td>"E"</td>
                  <td>:</td>
                  <td>Ethernet</td>
               </tr>
               <tr>
                  <td></td>
                  <td>"H"</td>
                  <td>:</td>
                  <td>HSSB</td>
               </tr>
               <tr>
                  <td></td>
                  <td>"X"</td>
                  <td>:</td>
                  <td>Cannot be used</td>
               </tr>
               <tr>
                  <td></td>
                  <td>"-"</td>
                  <td>:</td>
                  <td>None</td>
               </tr>
            </table>
            <p style="background-color:mistyrose;">Note) 0i-C does not support the HSSB function.</p>
            <p></p><a name="Reference"></a><p class="label">See Also</p>
            <p><a class="func" target="_parent" href="../toolMng/cnc_regtool.xml">cnc_regtool</a>&nbsp;&nbsp;
               <a class="func" target="_parent" href="../toolMng/cnc_deltool.xml">cnc_deltool</a>&nbsp;&nbsp;
               <a class="func" target="_parent" href="../toolMng/cnc_rdtool.xml">cnc_rdtool</a>&nbsp;&nbsp;
               <a class="func" target="_parent" href="../toolMng/cnc_rdtool_f2.xml">cnc_rdtool_f2</a>&nbsp;&nbsp;
               <a class="func" target="_parent" href="../toolMng/cnc_wrtool.xml">cnc_wrtool</a>&nbsp;&nbsp;
               <a class="func" target="_parent" href="../toolMng/cnc_wrtool_f2.xml">cnc_wrtool_f2</a>&nbsp;&nbsp;
               <a class="func" target="_parent" href="../toolMng/cnc_wrtool2.xml">cnc_wrtool2</a>&nbsp;&nbsp;
               </p><a name="Example"></a></div></FONT><hr>
   </body>
</html>